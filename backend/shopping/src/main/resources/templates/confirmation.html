<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title> Biker.vn - For Biker Lover </title>

	<!-- CSS -->
	<link rel="stylesheet" th:href="@{/css/bootstrap.css}">
	<link rel="stylesheet" th:href="@{/css/main.css}">
	<link rel="stylesheet" th:href="@{/css/commerce.css}">
	<link rel="stylesheet" th:href="@{/css/linearicons.css}">
	<link rel="stylesheet" th:href="@{/css/nice-select.css}">
	<link rel="stylesheet" th:href="@{/css/nouislider.min.css}">
	<link rel="stylesheet" th:href="@{/css/owl.carousel.css}">
	<link rel="stylesheet" th:href="@{/css/themify-icons.css}">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

</head>
<body>
    <!-- Start Header Area -->
	<header class="header">
		<!-- Main Navigation -->
		<div class="main_nav_container">
			<div class="container">
				<div class="row">
					<div class="col-lg-12 ">
						<div class="logo_container">
							<a th:href="@{/}"><img th:src="@{/img/logo2.jpg}"></a>
						</div>
						<nav class="navbar">
							<ul class="navbar_menu">
								<li><a th:href="@{/}">Home</a></li>
								<li><a th:href="@{/items}">Category</a></li>
								<li><a th:href="@{/blog}">What's New</a></li>
								<li><a th:href="@{/contact}">contact</a></li>
							</ul>
							<ul class="navbar_user">
								<li class="checkout">
									<a th:href="@{/cart}">
										<i class="fa fa-shopping-cart" aria-hidden="true"></i>
										<span id="checkout_items" class="checkout_items">2</span>
									</a>
								</li>
							</ul>
							<div class="hamburger_container">
								<i class="fa fa-bars" aria-hidden="true"></i>
							</div>
						</nav>
					</div>
				</div>
			</div>
		</div>
	</header>
	<div class="hamburger_menu">
		<div class="hamburger_close"><i class="fa fa-times" aria-hidden="true"></i></div>
		<div class="hamburger_menu_content text-right">
			<ul class="menu_top_nav">
				<li class="menu_item"><a th:href="@{/}">Home</a></li>
				<li class="menu_item"><a th:href="@{/items}">Category</a></li>
				<li class="menu_item"><a th:href="@{/blogs}">What's New</a></li>
				<li class="menu_item"><a th:href="@{/contact}">contact</a></li>
			</ul>
		</div>
	</div>
	<!-- End Header Area -->

	<!-- Start Banner Area -->
	<section class="banner-area" style="background-image: url(img/banner/banner3.jpg)">
		<div class="container">
			<div class="banner-details d-flex flex-wrap align-items-center justify-content-center">
				<div class="col-first">
					<h1><span></span>Confirmation</h1>
				</div>
			</div>
		</div>
	</section>
	<!-- End Banner Area -->

    <!-- Start Order Details Area -->
    <section class="order_details section_gap">
        <div class="container">
            <h3 class="title_confirmation">Thank you. Your order has been received</h3>
			<div class="row order_details_inner">
				<div class="col-md-12">
					<div class="item_details">
						<h3>Billing Address</h3>
						<ul class="list" style="margin-left: -20px;">
							<li><h5 id="name"></h5></li>
							<li><h5 id="email"></h5></li>
							<li><h5 id="phone"></h5></li>
							<li><h5 id="address"></h5></li>
						</ul>
					</div>
				</div>
			</div>
			<div class="order_details_table">
				<h2>Order Details</h2>
				<div class="table-responsive">
					<table class="table">
						<thead>
							<tr>
								<th scope="col">Product</th>
								<th scope="col">Quantity</th>
								<th scope="col">Total</th>
							</tr>
						</thead>
						<tbody id="products">
						</tbody>
					</table>
				</div>
			</div>
        </div>
    </section>
    <!-- End Order Details Area -->

	<!-- Start footer Area -->
	<footer class="footer-area section_gap">
		<div class="container">
			<div class="row">
				<div class="col-lg-6  col-md-6 col-sm-6">
					<div class="single-footer-widget">
						<h4>Contact Us</h4>
						<p>
							<p> Make by Star Catchers with love <br></p>
							<p>Address :158A Le Loi <br></p>
							<p>Phone : 0123456789 <br></p>
							<p>Email :Biker@gmail.com</p>
						</p>
					</div>
				</div>
				<div class="col-lg-4  col-md-6 col-sm-6">
					<div class="single-footer-widget">
						<h4>Newsletter</h4>
						<p>Stay update with our latest</p>
						<div class="" id="mc_embed_signup">

							<form target="_blank" novalidate="true" action="https://spondonit.us12.list-manage.com/subscribe/post?u=1462626880ade1ac87bd9c93a&amp;id=92a4423d01"
							 method="get" class="form-inline">

								<div class="d-flex flex-row">

									<input class="form-control" name="EMAIL" placeholder="Enter Email" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Enter Email '"
									 required="" type="email">


									<button class="click-btn btn btn-default"><i class="fa fa-long-arrow-right" aria-hidden="true"></i></button>
									<div style="position: absolute; left: -5000px;">
										<input tabindex="-1" value="" type="text">
									</div>
								</div>
								<div class="info"></div>
							</form>
						</div>
					</div>
				</div>
				<div class="col-lg-2 col-md-6 col-sm-6">
					<div class="single-footer-widget">
						<h4>Follow Us</h4>
						<p>Let us be social</p>
						<div class="footer-social d-flex align-items-center">
							<a href="#"><i class="fa fa-facebook"></i></a>
							<a href="#"><i class="fa fa-twitter"></i></a>
							<a href="#"><i class="fa fa-instagram"></i></a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</footer>
	<!-- End footer Area -->

	
	<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
	<script src="js/main.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/jquery-2.2.4.min.js"></script>
	<script src="js/scroll.js"></script>

	<script>
		$(document).ready(() => {
			const userInfo = JSON.parse(window.localStorage.getItem('userInfo'));

			$('#name').text('Name : ' + userInfo.name);
			$('#email').text('Email : ' +  userInfo.email);
			$('#phone').text('Phone : ' + userInfo.phone);
			$('#address').text('Address : ' + userInfo.address);

			let url = 'http://localhost:8080/api/items?itemIds=';
			let items = JSON.parse(window.localStorage.getItem('items'));

			if (items) {
				for (let item of items) {
					url = url + item.id + ',';
				}

				url = url.substring(0, url.length - 1);

				$.ajax({
					url: url,
					type: 'GET',
					contentType: 'application/json',
					success: function (itemsResult) {

						let total = 0;

						for (let item of itemsResult.content) {
							itemStorage = items.find(el => {return el.id == item.id});
							total += itemStorage.quantity * item.price;
							$('#products').append(generateItem(item, itemStorage));
						}

						$('#products').append(`<tr>
							<td>
								<p>Total : </p>
							</td>
							<td></td>
							<td>
								<p>${total}</p>
							</td>
						</tr>`);
					},
					error: function (error) {
						console.log(error);
					}
				});
			}
		});

		function generateItem(item, itemStorage) {
			let productTemplate = `
			<tr>
				<td>
					<p>${item.name}</p>
				</td>
				<td>
					<p>x ${itemStorage.quantity}</p>
				</td>
				<td>
					<p>${itemStorage.quantity * item.price}</p>
				</td>
			</tr>`;

			return productTemplate;
		}

	</script>
</body>
</html>



